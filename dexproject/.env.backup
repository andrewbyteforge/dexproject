# Enhanced DEX Trading Engine Configuration
# UPDATED: Phase 5.1 - Live Blockchain Data Integration
# FIXED: API key conflicts resolved, missing BASE_ALCHEMY_API_KEY added

# =============================================================================
# API KEYS (FIXED - Conflicts resolved)
# =============================================================================
ALCHEMY_API_KEY=9GmgCWBG2aArsq7UR6Noc
BASE_ALCHEMY_API_KEY=QQVCZXxW7uTGFjLEWTV4B
ANKR_API_KEY=e2a1bb30ced88fc7749c2edc3ed7d82a32cdbbc2e8622ec7bbf143814555d8bb
INFURA_PROJECT_ID=1ae88681246244a5a9ac097b920a42f4

# =============================================================================
# CRITICAL: LIVE DATA MODE CONFIGURATION
# =============================================================================
# PHASE 5.1 ACTIVATION - Switch to live blockchain data
ENGINE_MOCK_MODE=False  # CHANGED: Disable mock mode to enable live data
FORCE_MOCK_DATA=False   # CHANGED: Disable forced mock data
TRADING_MODE=PAPER      # Keep paper trading for safety during testing

# Engine Core Settings
ENGINE_NAME=dex-trading-engine
LOG_LEVEL=DEBUG  # Enhanced logging for live data monitoring

# Testnet Configuration (safe for testing live connections)
TESTNET_MODE=True
DEFAULT_CHAIN_ID=84532  # Base Sepolia
TARGET_CHAINS=84532,11155111,421614  # Base Sepolia, Ethereum Sepolia, Arbitrum Sepolia

# =============================================================================
# BLOCKCHAIN RPC PROVIDERS (FIXED - Uses correct variable names)
# =============================================================================

# Base Sepolia (Chain ID: 84532) - Your Primary Chain
BASE_RPC_URL=https://base-sepolia.g.alchemy.com/v2/QQVCZXxW7uTGFjLEWTV4B
BASE_WS_URL=wss://base-sepolia.g.alchemy.com/v2/QQVCZXxW7uTGFjLEWTV4B
BASE_SEPOLIA_RPC_URL=https://base-sepolia.g.alchemy.com/v2/QQVCZXxW7uTGFjLEWTV4B

# Ethereum Sepolia (Chain ID: 11155111)
ETH_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/9GmgCWBG2aArsq7UR6Noc
ETH_WS_URL=wss://eth-sepolia.g.alchemy.com/v2/9GmgCWBG2aArsq7UR6Noc
SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/9GmgCWBG2aArsq7UR6Noc

# Fallback providers
BASE_RPC_URL_FALLBACK=https://sepolia.base.org
ETH_RPC_URL_FALLBACK=https://rpc.sepolia.org
BASE_RPC_URL_2=https://sepolia.base.org
ETH_RPC_URL_2=https://rpc.sepolia.org

# Arbitrum Sepolia (Chain ID: 421614)
ARBITRUM_SEPOLIA_RPC_URL=https://sepolia-rollup.arbitrum.io/rpc

# =============================================================================
# LIVE MEMPOOL CONFIGURATION (For Real-Time Data)
# =============================================================================
# PHASE 5.1 FEATURE: Live WebSocket mempool monitoring
MEMPOOL_MONITORING_ENABLED=True
MEMPOOL_LIVE_MODE=True  # NEW: Enable live mempool data processing

# WebSocket Connection Settings for Live Data
WEBSOCKET_TIMEOUT=30
WEBSOCKET_RECONNECT_DELAY=5
WEBSOCKET_MAX_RETRIES=100

# Transaction Filtering (optimized for testnet)
MEMPOOL_MIN_VALUE_ETH=0.001  # Lower threshold for testnet activity
MEMPOOL_MIN_GAS_GWEI=1.0     # Lower gas threshold for testnet
MEMPOOL_MAX_AGE_SECONDS=300.0
MEMPOOL_TRACK_DEX_ONLY=True  # Focus on DEX transactions for efficiency
MEMPOOL_MAX_PENDING=5000

# =============================================================================
# ENGINE PERFORMANCE CONFIGURATION
# =============================================================================
# Fast Lane Performance Targets
FAST_LANE_ENABLED=True
FAST_LANE_TARGET_MS=500
FAST_LANE_SLA_MS=300

# Engine Auto-Start for Live Mode
ENGINE_AUTO_START=True   # CHANGED: Auto-start engine for live data
ENGINE_DEBUG_LOGGING=True  # Enhanced debugging for live connections

# Smart Lane Configuration
SMART_LANE_ENABLED=True
SMART_LANE_MOCK_MODE=False  # CHANGED: Enable Smart Lane live data integration
SMART_LANE_CACHE_TTL=300

# =============================================================================
# DASHBOARD CONFIGURATION (Enhanced for Live Data)
# =============================================================================
# Real-time dashboard updates for live data
DASHBOARD_METRICS_CACHE_TIMEOUT=15  # Faster updates for live data
DASHBOARD_SSE_UPDATE_INTERVAL=2     # Keep 2-second updates
SSE_MAX_ITERATIONS=300              # Longer sessions for live monitoring

# =============================================================================
# DISCOVERY & MONITORING SETTINGS
# =============================================================================
DISCOVERY_ENABLED=true
HTTP_POLL_INTERVAL=5  # Fallback polling interval in seconds
MAX_PAIRS_PER_HOUR=100  # Rate limiting for new pair discovery
EVENT_BATCH_SIZE=50  # Process events in batches

# =============================================================================
# RISK ASSESSMENT SETTINGS (Adjusted for Testnet)
# =============================================================================
RISK_TIMEOUT=15  # Seconds to wait for risk checks
RISK_PARALLEL_CHECKS=4  # Number of parallel risk assessments
MIN_LIQUIDITY_USD=100  # Lower minimum liquidity for testnet
MAX_BUY_TAX_PERCENT=5.0  # Maximum acceptable buy tax
MAX_SELL_TAX_PERCENT=5.0  # Maximum acceptable sell tax
MIN_HOLDER_COUNT=10  # Lower holder count for testnet

# =============================================================================
# PORTFOLIO MANAGEMENT (Conservative for Testing)
# =============================================================================
MAX_PORTFOLIO_SIZE_USD=100  # Small portfolio for testing
MAX_POSITION_SIZE_USD=10  # Small position sizes for testing
DAILY_LOSS_LIMIT_PERCENT=5.0  # Daily loss limit
CIRCUIT_BREAKER_LOSS_PERCENT=10.0  # Emergency stop loss

# =============================================================================
# TRADE EXECUTION SETTINGS
# =============================================================================
DEFAULT_SLIPPAGE_PERCENT=1.0  # Default slippage tolerance
MAX_GAS_PRICE_GWEI=10  # Lower gas price for testnet
EXECUTION_TIMEOUT=30  # Seconds to wait for transaction confirmation
NONCE_MANAGEMENT=auto  # auto | manual

# =============================================================================
# PAPER TRADING SETTINGS (for testing)
# =============================================================================
PAPER_MODE_SLIPPAGE=0.5  # Simulated slippage in paper mode
PAPER_MODE_LATENCY_MS=200  # Simulated execution latency

# =============================================================================
# PROVIDER MANAGEMENT
# =============================================================================
PROVIDER_HEALTH_CHECK_INTERVAL=30  # Health check frequency in seconds
PROVIDER_FAILOVER_THRESHOLD=3  # Failures before failover
PROVIDER_RECOVERY_TIME=300  # Seconds before retrying failed provider

# =============================================================================
# DATABASE & CACHING
# =============================================================================
# Redis for caching and task queue
REDIS_URL=redis://localhost:6379/0

# SQLite Database (default for development)
# Uncomment below for PostgreSQL:
# DATABASE_URL=postgresql://user:password@localhost:5432/dexbot

# =============================================================================
# DJANGO SETTINGS
# =============================================================================
SECRET_KEY=your-super-secret-django-key-change-this-in-production
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# =============================================================================
# CELERY TASK QUEUE
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# =============================================================================
# DEX CONTRACT ADDRESSES (Testnet)
# =============================================================================
# Base Sepolia
BASE_UNISWAP_V3_ROUTER=0x2626664c2603336E57B271c5C0b26F421741e481
BASE_UNISWAP_V3_FACTORY=0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24

# Ethereum Sepolia
UNISWAP_V2_ROUTER=0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D
UNISWAP_V3_ROUTER=0xE592427A0AEce92De3Edee1F18E0157C05861564

# =============================================================================
# FAST LANE PERFORMANCE TUNING
# =============================================================================
# Performance targets for Fast Lane
FAST_LANE_TARGET_MS=500  # Target execution time for Fast Lane
FAST_LANE_SLA_MS=300     # SLA for analysis time

# Risk cache settings for Fast Lane
RISK_CACHE_TTL=3600      # Risk cache TTL in seconds
RISK_CACHE_MAX_SIZE=10000 # Maximum risk cache entries

# =============================================================================
# PHASE 5.1 LIVE DATA VALIDATION FLAGS
# =============================================================================
# These control the live blockchain data implementation
BLOCKCHAIN_LIVE_CONNECTIONS=True
MEMPOOL_WEBSOCKET_ENABLED=True
REAL_TRANSACTION_PROCESSING=True

# =============================================================================
# SIWE Configuration (Phase 5.1B)
# =============================================================================
SIWE_DOMAIN=localhost:8000
SIWE_SESSION_EXPIRES_HOURS=24

# =============================================================================
# WALLET SECURITY LIMITS (Phase 5.1B)
# =============================================================================
WALLET_MAX_DAILY_LIMIT_USD=10000
WALLET_MAX_TRANSACTION_LIMIT_USD=1000
WALLET_REQUIRE_CONFIRMATION=True

# =============================================================================
# DEVELOPMENT & DEBUG SETTINGS
# =============================================================================
DJANGO_LOG_LEVEL=INFO
ENGINE_LOG_LEVEL=DEBUG  # Enhanced logging for live data troubleshooting
ENGINE_DEBUG_MODE=True
MEMPOOL_DEBUG_MODE=True  # Enable detailed mempool debugging for live connections

# =============================================================================
# REMOVED: Duplicate/Conflicting API Key Entries
# =============================================================================
# The following duplicate entries have been removed to prevent conflicts:
# - ALCHEMY_API_KEY=your_alchemy_api_key_here
# - ANKR_API_KEY=your_ankr_api_key_here  
# - INFURA_PROJECT_ID=your_infura_project_id_here
# - BASE_API_KEY (replaced with BASE_ALCHEMY_API_KEY)
# - ETH_API_KEY (redundant with ALCHEMY_API_KEY)TRADING_MODE=PAPER 
